## 비슷한 용어들

- Multi Tasking
- Multi Programming
- Time sharing
- Multi Process

구분

- 위 용어들은 컴퓨터에서 여러 작업을 동시에 수행하는 것을 뜻함.
- Multiprogramming은 여러 프로그램이 메모리에 올라가 있음을 강조
- Time Sharing은 CPU의 시간을 분할하여 나누어 쓴다는 의미를 강조

## Multiprocessor

- 하나의 컴퓨터에 CPU (processor)가 여러 개 붙어 있음을 의미

# 운영체제의 예

## 유닉스(UNIX)

서버를 위해 만들어진 운영체제

- 코드의 대부분을 C언어로 작성
    - 어셈블리어로 작성하는 것이 너무 어려움
    - 고급 언어로 작성되었기 때문에 사람이 이해하기 편함
- 높은 이식성
- 최소한의 커널 구조
- 복잡한 시스템에 맞게 확장 용이
- 소스 코드 공개
- 프로그램 개발에 용이
- 다양한 버전
    - System V, FreeBSD, SunOS, Solaris
    - Linux

## DOS(Disk Operating System)

- MS에서 1981년 IBM-PC를 위해 개발
- 단일 사용자용 운영체제, 메모리 관리 능력의 한계

## MS Windows

- MS에서 다중 작업용 GUI 기반 운영 체제

# 컴퓨터 시스템 구조

- 전원을 키게 되면 운영체제는 메모리에 항상 상주하고 있음
- CPU가 운영체제에 의해 수행될 때는 어떤 작업이든 수행해도 좋음.
- 그러나 운영체제가 사용자 프로그램에게 CPU를 넘겨주게 되면, 아무 작업이나 맡기면 안 됨.

그래서 CPU에서 기계어를 수행할 때, 사용자 프로그램을 수행 중인지, 운영체제에 의한 작업을 수행 중인지 모드 비트(mode bit)로 구분함.

### Mode bit

사용자 프로그램의 잘못된 수행으로 다른 프로그램 및 운영체제에 피해가 가지 않도록 하기 위한 보호 장치 필요

- Mode bit를 통해 하드웨어적으로 두 가지 모드의 operation 지원

```
1 사용자 모드: 사용자 프로그램 수행
0 모니터 모드: OS 코드 수행
```

- 보안을 해칠 수 있는 중요한 명령어는 모니터 모드에서만 수행 가능한 `특권명령`으로 규정
- Interrupt나 Exception 발생시 하드웨어가 mode bit를 0으로 바꾼다
- 사용자 프로그램에세 cPU를 넘기기 전에 mode bit를 1로 세팅

#### 모니터 모드

-> 커널 모드, 시스템 모드

### Interrupt

- 인터럽트 당한 시점의 레지스터와 program counter를 save한 후 CPU의 제어를 인터럽트 처리 루틴에 넘긴다.
- CPU에는 Interrupt line이라는 것이 붙어 있음

#### 넓은 의미

- `Interrupt`(하드웨어 인터럽트, 일반적인 인터럽트): 하드웨어가 발생시킨 인터럽트
- `Trap`(소프트웨어 인터럽트, 개별 프로그램이 운영체제에게 CPU를 넘기기 위해)
    - Exception: 프로그램이 오류를 범한 경우
    - System call: 프로그램이 커널 함수를 호출하는 경우

- 매 순간 메모리에서 기계어를 실행한 다음, Interrupt line에 signal이 있는지 확인
- interrupt가 있으면, CPU는 자동적으로 운영체제에게 넘어가게 된다
    - ex) disk file을 다 읽었음

#### 인터럽트 관련 용어

- 인터럽트 벡터
    - 해당 인터럽트의 처리 루틴 주소를 가지고 있음
- 인터럽트 처리 루틴(Interrupt Service Routine, 인터럽트 핸들러)
    - 해당 인터럽트를 처리하는 커널 함수(어떤 처리를 해야 하는지 정의됨)

### Registers

- PC(program counter)는 메모리의 주소를 가지고 있음.
- 다음 번 수행할 기계어의 메모리 주소를 저장하기 때문에 이를 통해 CPU가 그 위치에서 기계어를 가져와 수행할 수 있음
- 인터럽트가 들어오게 되면, PC는 운영체제 위치를 가리키게 됨
    - 모드 비트가 0이 됨

### timer

부가적인 하드웨어, CPU의 독점을 막기 위함

- 운영체제가 사용자 프로그램A에게 CPU를 넘길 때, timer에게 시간을 세팅한 후 넘겨줌
- 일정 시간이 흐르게 되면, timer가 CPU에게 인터럽트를 걸게 됨

### I/O Device controller

모든 IO장치를 접근한다는 것은, CPU가 요청하는 것이고 이는 특권 명령이다.

- 사용자 프로그램은 할 수 없다.
- 사용자 프로그램은 OS에게 부탁하게 된다(운영체제는 권한을 갖고 있으므로).
    - 커널에게 시스템 콜을 통해 가능하다.
    - 이 때 운영체제로의 점프가 필요한데, 서로 다른 메모리 영역이기 때문에, 인터럽트를 발생시켜야 가능함
    - 이 사용자 프로그램이 스스로 자신의 기계어를 통해 인터럽트 라인을 세팅한다.
        - 이러한 것을 `소프트웨어 인터럽트`라 부른다.
        - 하드웨어들이 CPU에게 인터럽트를 거는 것은 `하드웨어 인터럽트`

